<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.campus.management.controller.AdminController"
            prefWidth="900"
            prefHeight="600"
            style="-fx-background-color: linear-gradient(to bottom, #f8fafc, #e2e8f0);"
            stylesheets="@theme.css">

    <!-- Sidebar -->
    <left>
        <VBox spacing="20" alignment="TOP_CENTER"
              style="-fx-background-color: #1e293b;"
              prefWidth="220">
            <padding>
                <Insets top="30" right="15" bottom="30" left="15"/>
            </padding>

            <!-- Profile / Brand -->
            <VBox alignment="CENTER" spacing="10">
                <ImageView fitWidth="80" fitHeight="80" preserveRatio="true">
                    <image>
                        <Image url="@../images/admin_avatar.png"/> <!-- Placeholder or reuse person.png -->
                    </image>
                </ImageView>
                <Label text="Admin Panel" textFill="white" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                <Label text="System Administrator" textFill="#94a3b8" style="-fx-font-size: 12px;"/>
            </VBox>

            <Separator style="-fx-opacity: 0.1; -fx-background-color: white;"/>

            <!-- Navigation -->
            <VBox spacing="10" VBox.vgrow="ALWAYS">
                <Button text="Dashboard" maxWidth="Infinity" styleClass="icon-button" style="-fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-background-color: transparent;"/>
                <Button text="Events" maxWidth="Infinity" styleClass="icon-button" style="-fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-background-color: rgba(255,255,255,0.1);" onAction="#showEventsView"/>
                <Button text="Users" maxWidth="Infinity" styleClass="icon-button" style="-fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-background-color: transparent;" onAction="#showUsersView"/>
                <Button text="Settings" maxWidth="Infinity" styleClass="icon-button" style="-fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-background-color: transparent;"/>
            </VBox>

            <Button text="Logout" maxWidth="Infinity" styleClass="secondary-button" style="-fx-background-color: #ef4444; -fx-text-fill: white; -fx-border-color: transparent;" onAction="#onLogout"/>
        </VBox>
    </left>

    <!-- Main Content -->
    <center>
        <VBox spacing="20">
            <padding>
                <Insets top="30" right="30" bottom="30" left="30"/>
            </padding>

            <!-- Main Content Stack -->
            <StackPane VBox.vgrow="ALWAYS">
                
                <!-- Event Management View -->
                <VBox fx:id="eventsView" spacing="20">
                    <!-- Event Header -->
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <VBox>
                            <Label text="Event Management" styleClass="title"/>
                            <Label text="Approve, reject, or delete events." styleClass="subtitle"/>
                        </VBox>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="statusLabel" style="-fx-text-fill: #64748b;"/>
                    </HBox>

                    <!-- Event Action Toolbar -->
                    <HBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 5, 0, 0, 1);">
                        <Button text="All Events" onAction="#loadAllEvents" styleClass="secondary-button"/>
                        <Button text="Pending" onAction="#loadPendingEvents" styleClass="primary-button" style="-fx-background-color: #0ea5e9;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <!-- Inline actions for individual Events are now provided in the list -->
                    </HBox>

                    <!-- Event List -->
                    <VBox VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 5, 0, 0, 1); -fx-padding: 0;">
                        <ListView fx:id="eventsListView" VBox.vgrow="ALWAYS" style="-fx-background-insets: 0; -fx-padding: 10; -fx-background-color: transparent;"/>
                    </VBox>
                </VBox>

                <!-- User Management View -->
                <VBox fx:id="usersView" spacing="20" visible="false">
                    <!-- User Header -->
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <VBox>
                            <Label text="User Management" styleClass="title"/>
                            <Label text="Manage registered users." styleClass="subtitle"/>
                        </VBox>
                        <Region HBox.hgrow="ALWAYS"/>
                    </HBox>

                    <!-- User Action Toolbar -->
                    <HBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 5, 0, 0, 1);">
                        <Button text="Load All Users" onAction="#loadAllUsers" styleClass="secondary-button"/>
                        <Region HBox.hgrow="ALWAYS"/>
                    </HBox>

                    <VBox VBox.vgrow="ALWAYS" style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 5, 0, 0, 1); -fx-padding: 0;">
                        <ListView fx:id="usersListView" VBox.vgrow="ALWAYS" style="-fx-background-insets: 0; -fx-padding: 10; -fx-background-color: transparent;"/>
                    </VBox>
                </VBox>

            </StackPane>

        </VBox>
    </center>

</BorderPane>
